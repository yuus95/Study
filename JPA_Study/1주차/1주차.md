# 1주차


## JPA을 배우는 이유

- JPA를 실무에서 바로 사용하기가 어렵다.
  - 객체와 테이블을 올바르게 매핑하기위한 설계 방법을 모른다
  - JPA 내부 동작 방식을 이해 못해서 어렵다. </br>
   --> 디버깅 하는데 오래걸린다.

</br>

 - 적용사례  
   - 우아한 형제들, 쿠팡, 카카오톡, 네이버들 수많은 자사 서비스 회사들이 사용한다.
   --> 대기업뿐만 아니라 자사회사를 가고싶은 사람들은 배워야한다.

</br>

 - 김영한님의 경험담
   - 단순 반복 SQL 작성으로 시간낭비를 하지 않는다. </br>
   --> 개발 생산성이 향상된다.


---


## SQL 중심적인 개발의 문제점

- 무한 반복 , 지루한 코드
  - 수많은 테이블에 대한 CRUD을 직접 작성함으로써 개발 생산성이 떨어진다. </br> -> 회사에서는 엄청많은 테이블을 사용하고 있음

</br>

- 기획자에 요구사항에 의한 컬럼추가시 모든 쿼리문 수정
  - 관련된 쿼리문에 대해서 전체적인 수정이 필요하다. </br>
  ex) 객체를 생성하는 쿼리문일 경우 쿼리관련된 코드를 찾아 추가된 컬럼을 추가해야 한다. 
  
  </br>

- SQL에 의존적인 개발을 피하기 어렵다
  - 관계형 DB를 사용하는 한 SQL의존을 피하기 어렵다.
  - 객체를 관계형 데이터베이스에 저장할 떄, 관련된 쿼리를 우리가 직접 생성해야 한다.

</br>

- 객체와 데이터베이스의 차이
  - 상속 
    - 자바에는 상속관계가 있지만, RDB는 슈퍼타입 서브타입관계로 표시해야한다. </br> --> 조회 관련된 쿼리를 작성할 경우, 각각의 테이블에 따른 조인 SQL작성(여러쿼리를 작성해야하는 문제점 발생)

  - 연관 관계
    - 객체는 참조를 사용.

      </br>
    

    ``` Java
    // 객체 연관관계
    class Member{
        String id;
        Team team; // 참조로 연관관계를 맺는다
        String username;

        team getTeam(){
            return team;
        }
    }

    class Team{
        Long id;
        String name;
    }

    ```   
    - RDB는 외래키를 사용
    
    </br>
    
    ```
    Select 
        M.USERNAME
    from 
       MEMBER M
     JOIN ON 
        M.TEAM_ID = T.TEAM_ID 
        <!-- 외래키 사용  -->
    ``` 


- 객체 그래프 탐색
  - 객체는 자유롭게 개체 그래프를 탐색할 수 있어야 한다. </br>
  하지만 SQL을 직접 다루면 객체 그래프는 처음 실행하는 SQL에 따라
  탐색 범위가 결정된다  </br>
  --> 엔티티 신뢰도가 떨어진다.

- 비교하기
  - 같은 MemberID를 이용하여 두개의 객체를 조회했을 경우 두 객체는 같지않다고 표시한다.
   ```java
    String memberId="100";
    Member member1 = memberDAO.getMember(memberId);
    Member member2 = memberDao.getMember(memberId);


    member1 == member2 //같지않다고 표시한다.

    class MemberDao{
        public Member getMember(String memberId){
            String sql = "SELECT * FROM MEMBER WHERE MEMBER_ID = ?";
            ...
            return new Member();
        }
    }
   ```
  - 같은MemberID를 이용하여 2개의 객체를 자바 컬렉션으로 통해 생성하여 비교하면 같다고 표시한다.
  ```java
  String memberId= "100";
  Member member1 = list.get(memberId);
  Member member2 = list.get(memberId);

  member1 == member2 // 같음표시
  ```
