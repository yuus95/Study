# 3주차 Study - 엔티티 매핑


- 엔티티 매핑 소개
    - 객체와 테이블 매핑: @Entity, @Table

    - 필드와 컬럼 매핑: @Column

    - 기본 키 매핑 :@Id

    - 연관관계(참조관계) 매핑: @ManyToOne,@JoinColumn

- 객체와 테이블 매핑
    - Entity
        - @Entity가 붙은 클래스는 JPA가 관리하는 엔티티가 된다.
        - JPA를 사용해서 테이블과 매핑할 클래스는 @Entity가 필수이다.

        - 기본 생성자 필수(파라미터가 없는 public 또는 protected생성자) // @NoArgsConstructor(access = AccessLevel.PROTECTED) 또는 protected 기본생성자를 생성하는걸 추천

        - final클래스,enum,interface , inner 클래스 사용 x
        - 저장할 필드에 final사용 x

        - 속성
            - name 
                - JPA에서 사용할 엔티티 이름을 지정한다.
                - 기본값 : 클래스 이름을 그대로 사용
                - 같은 클래스 이름이 없으면 가급적 기본값을 사용한다.
            
            - catalog,schema,uniqueContraints(ddl)등의 속성이 있다.

        
    - 데이터베이스 스카마 자동 생성
        - DDL을 애플리케이션 실행 시점에 자동 생성
        - 테이블 중심 -> 객체중심
        - 데이터 베이스 방언을 활용해서 데이터베이스에 맞는 적절한 DDL작성
        - 생성된 DDL은 개발 장비에서만 쓰기(운영서버xx)
        
        - 속성(hibernate,hbm2ddl.auto - yml 파일내에 속성)
            - create : 기존 테이블 삭제 후 다시 생성
            - create - drop : create와 같으나 종료시점에 테이블 DROP
            - update - 변경분만 반영
            - validate : 엔티티와 테이블이 정상 매핑되었는지만 확인
            - none : 사용하지 않음

        - DDL 생성 기능
            - DDL 생성 기능은 위의 스카마 자동 생성 기능을 사용해 DDL을 자동 생성할 때만 사용 -> JPA 실행 로직에는 영향을 주지 않는다
            
            - 제약 조건 추가
                ```java
                @Entity
                public class Member{

                    // 회원 이름은 필수, 10 자 초과 x
                    @Column(nullable = false,length = 10)
                    private String name;
                }
                ```
            - 유니크 제약 조건 추가
                ```java
                

                @Entity
                @Table(uniqueContraints={@UniqueConstraint(name= "NAME_AGE_UNIQUE",columnNames={"NAME","AGE"})})
                public class Member{

                }



                ```
    - 필드와 컬럼 매핑
        - 


